#include <stdio.h>
#include <stdlib.h>

#include "config.h"
#include "itm_messages.h"

// ====================================================================================================
// Setup routine called before main
// ====================================================================================================
void SystemInit(void)
{

}
// ====================================================================================================
// ====================================================================================================
// ====================================================================================================
#define N 10000

char notprime[N+1];

//  Eratosthenes sieve

static void _sieve(void)

{
    int k;

    for (int y=0; y<=N; y++)
        {
            notprime[y]=0;
        }

    k=2;
    while(k<=N)
        {
            int t=2;
            while(t*k<=N)
                {
                    notprime[t*k]=1;
                    t++;
                }
            k++;
            while(k<=N && notprime[k]==1)
                {
                    k++;
                }
        }
}
// ====================================================================================================
// ====================================================================================================
// ====================================================================================================
// Externally available routines
// ====================================================================================================
// ====================================================================================================
// ====================================================================================================
int main( void )

{
	ITM_ChannelEnable(0);
	ITM_Enable();
	ITM_SendString( 0,"\n\nSimple Example running\n");
    while (1)
        {
            for (char a='A'; a<'Z'; a++)
                {
                    _sieve();
                    ITM_Send8(0,a);
                }
	ITM_Send8(0,'\r');
	ITM_Send8(0,'\n');
	ITM_SendString(0, __DATE__);
	ITM_Send8(0,'\r');
	ITM_Send8(0,'\n');
	ITM_SendString(0, __TIME__);
	ITM_Send8(0,'\r');
	ITM_Send8(0,'\n');
        }

    /* should not reach this statement */
    return 0;
}
// ====================================================================================================
